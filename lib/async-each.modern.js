import e from"@chriscdn/promise-semaphore";const t=(t,r,a=(()=>{}),l={})=>{var n;let o=0;const s=t.length,i=null!=(n=l.rateLimit)?n:0,c=i?new e(i):null,m=t.map((e,t,l)=>new Promise(async(n,i)=>{setTimeout(async()=>{try{await(null==c?void 0:c.acquire());const i=await r(e,t,l);n(i),a({progress:o++,total:s,percent:Math.floor(100*o/s),item:e,index:t,result:i})}catch(e){i(e)}finally{null==c||c.release()}},1)}));return Promise.all(m)};export{t as default};
//# sourceMappingURL=async-each.modern.js.map
