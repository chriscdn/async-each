!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("@chriscdn/promise-semaphore")):"function"==typeof define&&define.amd?define(["@chriscdn/promise-semaphore"],n):(e||self).asyncEach=n(e.promiseSemaphore)}(this,function(e){return function(n,r,t,o){var i;void 0===t&&(t=function(){}),void 0===o&&(o={});var u=0,c=n.length,s=null!=(i=o.rateLimit)?i:0,l=s>0?new e.Semaphore(s):null,f=n.map(function(e,n,o){return new Promise(function(i,s){try{return setTimeout(function(){try{var f=function(f,a){try{var h=function(s,f){try{var a=Promise.resolve(null==l?void 0:l.acquire()).then(function(){return Promise.resolve(r(e,n,o)).then(function(r){i(r),t({progress:u++,total:c,percent:Math.floor(100*u/c),item:e,index:n,result:r})})})}catch(e){return f(e)}return a&&a.then?a.then(void 0,f):a}(0,function(e){s(e)})}catch(e){return a(!0,e)}return h&&h.then?h.then(a.bind(null,!1),a.bind(null,!0)):a(!1,h)}(0,function(e,n){if(null==l||l.release(),e)throw n;return n});return Promise.resolve(f&&f.then?f.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},0),Promise.resolve()}catch(e){return Promise.reject(e)}})});return Promise.all(f)}});
//# sourceMappingURL=async-each.umd.js.map
