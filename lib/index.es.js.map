{"version":3,"file":"index.es.js","sources":["../src/index.ts"],"sourcesContent":["export type TAsyncEachStatus<T, R> = {\n  progress: number;\n  total: number;\n  percent: number;\n  item: T;\n  index: number;\n  result: R;\n};\n\ntype TCallbackFn<T, R> = (\n  item: T,\n  index: number,\n  items: Array<T>\n) => Promise<R> | R;\n\nexport type TAsyncEachStatusCallbackFn<T, R> = (\n  status: TAsyncEachStatus<T, R>\n) => void;\n\nfunction asyncEach<T, R>(\n  items: Array<T>,\n  callbackFn: TCallbackFn<T, R>,\n  statusCallbackFn: TAsyncEachStatusCallbackFn<T, R> = () => {}\n): Promise<Array<R>> {\n  let progress: number = 0;\n  const total: number = items.length;\n\n  const promises = items.map((item: T, index: number, items: Array<T>) => {\n    return new Promise<R>(async (resolve, reject) => {\n      setTimeout(async () => {\n        try {\n          const result = await callbackFn(item, index, items);\n\n          resolve(result);\n\n          statusCallbackFn({\n            progress: progress++,\n            total,\n            percent: Math.floor((100 * progress) / total),\n            item,\n            index,\n            result,\n          });\n        } catch (err) {\n          reject(err);\n        }\n      }, 0);\n    });\n  });\n\n  // This will reject if any promise fails.\n  return Promise.all(promises);\n}\n\nexport default asyncEach;\n"],"names":["items"],"mappings":"AAmBA,SAAS,SACP,CAAA,KAAA,EACA,UACA,EAAA,gBAAA,GAAqD,MAAM;AAAC,CACzC,EAAA;AACnB,EAAA,IAAI,QAAmB,GAAA,CAAA,CAAA;AACvB,EAAA,MAAM,QAAgB,KAAM,CAAA,MAAA,CAAA;AAE5B,EAAA,MAAM,WAAW,KAAM,CAAA,GAAA,CAAI,CAAC,IAAA,EAAS,OAAeA,MAAoB,KAAA;AACtE,IAAA,OAAO,IAAI,OAAA,CAAW,OAAO,OAAA,EAAS,MAAW,KAAA;AAC/C,MAAA,UAAA,CAAW,YAAY;AACrB,QAAI,IAAA;AACF,UAAA,MAAM,MAAS,GAAA,MAAM,UAAW,CAAA,IAAA,EAAM,OAAOA,MAAK,CAAA,CAAA;AAElD,UAAA,OAAA,CAAQ,MAAM,CAAA,CAAA;AAEd,UAAiB,gBAAA,CAAA;AAAA,YACf,QAAU,EAAA,QAAA,EAAA;AAAA,YACV,KAAA;AAAA,YACA,OAAS,EAAA,IAAA,CAAK,KAAO,CAAA,GAAA,GAAM,WAAY,KAAK,CAAA;AAAA,YAC5C,IAAA;AAAA,YACA,KAAA;AAAA,YACA,MAAA;AAAA,WACD,CAAA,CAAA;AAAA,iBACM,GAAK,EAAA;AACZ,UAAA,MAAA,CAAO,GAAG,CAAA,CAAA;AAAA,SACZ;AAAA,SACC,CAAC,CAAA,CAAA;AAAA,KACL,CAAA,CAAA;AAAA,GACF,CAAA,CAAA;AAGD,EAAO,OAAA,OAAA,CAAQ,IAAI,QAAQ,CAAA,CAAA;AAC7B;;;;"}